<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>BeatsPong - Login</title>
	<!-- Bootstrap CSS -->
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
	<!-- Fonts Awesome CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" />
	<!-- Custom CSS -->
	<link rel="stylesheet" href="../css/styles.css">
	<link rel="stylesheet" href="../css/index.css">
	<link rel="stylesheet" href="../css/login.css">
	<link rel="stylesheet" href="../css/menu.css">
	<link rel="stylesheet" href="../css/game.css">
</head>

<body>

	<div id="googleTranslate" class="dropdown">
		<button class="dropbtn">
			<i class="fa-solid fa-globe fa-2xl"></i>
			<!-- <img src="path/to/icon.png" alt="Icon" class="icon"> Language -->
		</button>
		<div class="dropdown-content">
			<!-- Buttons to switch languages -->
			<button onclick="translate_eng()">ENGLISH</button>
			<button onclick="translate_chi()">MANDARIN</button>
			<button onclick="translate_mly()">MALAY</button>
		</div>
	</div>
	<script>
		// Define the googleTranslateElementInit function before the script loads
		function googleTranslateElementInit() {
			console.log("Google Translate initialized");
			new google.translate.TranslateElement({
				pageLanguage: 'en',
				includedLanguages: 'en,zh-CN,ms',
				autoDisplay: false
			}, 'google_translate_element');
		}
	</script>
	<!-- Google Translate Widget (hidden) -->
	<div id="google_translate_element" class="hidden"></div>
	<div>


		<!-- Log in or registration selection screen -->
		<div id="landingScreen" class="">
			<div id="landingScreenFlexer"
				class="container d-flex flex-column justify-content-center align-items-center vh-100 Scifi">
				<iframe id="matrixIframe" src="./matrix_background/matrix.html"></iframe>
				<div class="container d-flex flex-column justify-content-center align-items-center vh-100">
					<h1 class="title">BEATSPONG</h1>
					<div class="button-container">
						<button class="btn btn-custom mx-3" id="loginButton">LOGIN</button>
						<button class="btn btn-custom" id="registerButton">REGISTER</button>
					</div>
				</div>
			</div>
		</div>
		<!-- End of selection screen -->

		<!-- Login Screen -->
		<div id="loginScreen"
			class="container d-none flex-column justify-content-center align-items-center vh-100 Scifi">
			<div class="container d-flex flex-column justify-content-center align-items-center vh-80 margin-top">
				<i class="fas fa-table-tennis"></i>
				<br><br>
				<form id="loginForm">
					<div class="form-group">
						<label for="username">USERNAME:</label>
						<input type="text" class="form-control" id="username">
					</div>
					<div class="form-group">
						<label for="password">PASSWORD:</label>
						<input type="password" class="form-control" id="userPassword">
					</div>
					<div class="mt-5 font-weight-bold slogan">
						<p>"You choose the blue pill, the game ends. You disconnect, convincing yourself the victory was
							yours. You choose the red pill, and you remain in the game. I'll show you how far your skill
							can take you in this arena."</p>
					</div>
					<div class="button-login">
						<button type="submit" class="redpill"></button>
						<button id="backbtn" class="bluepill"></button>
					</div>
				</form>
				<div id="errorMessage" class="d-none CN-font"
					style="border: 2px solid darkred; background-color: lightcoral; color: black; padding: 10px; margin-top: 15px;">
					<span id="errorText"></span>
				</div>
			</div>
		</div>

		<!-- Register Screen -->
		<div id="registerScreen"
			class="container d-none flex-column justify-content-center align-items-center vh-100 Scifi">

			<div class="margin-top login">
				<h1>Enter the pong matrix.</h1>
				<form id="registerForm">
					<div class="form-group">
						<label for="username1">Username:</label>
						<input type="text" class="form-control" id="username1">
					</div>
					<div class="form-group">
						<label for="email">Email:</label>
						<input type="email" class="form-control" id="email">
					</div>
					<div class="form-group">
						<label for="password">Password:</label>
						<input type="password" class="form-control" id="password">
					</div>
					<div class="button-register">
						<button type="submit" class="redbtn ">Submit</button>
						<button id="backbtn2" class="bluebtn">Back</button>
					</div>
				</form>
				<div id="errorMessage2" class="d-none CN-font"
					style="border: 2px solid darkred; background-color: lightcoral; color: black; padding: 10px; margin-top: 15px;">
					<span id="errorText2"></span>
				</div>
			</div>
		</div>

		<!-- real profile page -->
		<div class='Menu d-none' id="menuScreen">
			<div class="container">
				<div class="profile">
					<div class="centered-container">
						<div class="profile-picture-container">
							<img id="profilePictureMenu1" src="" alt="Profile Pic">
						</div>
						<div style="display: flex; align-items: center;">
							<h2>Username:&nbsp;</h2>
							<h2 id="usernameTitle1">placeholder</h2>
						</div>
						<div style="display: flex; align-items: center;">
							<h2>Display name:&nbsp;</h2>
							<h2 id="displaynameTitle">placeholder</h2>
						</div>
						<div style="display: flex; align-items: center;">
							<h2>Total Match Played:&nbsp;</h2>
							<h2 id="totalMatch">-1</h2>
						</div>
						<div style="display: flex; align-items: center;">
							<h2>Matches Won:&nbsp;</h2>
							<h2 id="winMatch">-1</h2>
						</div>
						<div style="display: flex; align-items: center;">
							<h2>Matches Lost:&nbsp;</h2>
							<h2 id="loseMatch">-1</h2>
						</div>
					</div>
					<p class="win-rate">Win Rate: <span id="winRate">0.0</span>%</p>
					<div class="win-rate-container center">
						<div class="win-rate-bar">
							<div id="winRateProgress"></div>
						</div>
					</div>
					<div class="game-buttons large-buttons">
						<button id="vanillaPong">Play Vanilla Pong</button>
						<button id="friendsPong">Play Friends Pong</button>
						<!-- <button id="demoPong">Demo Pong</button> -->
					</div>
				</div>
				<div class="friend-section">
					<div class="friend-list">
						<h2>Friend List</h2>
						<div class="search-bar">
							<input type="text" id="friendSearch" placeholder="Search friends...">
							<button id="searchFriends">Search</button>
						</div>
						<ul id="friendsList"></ul>
						<div class="pagination">
							<button id="prevPage">Previous</button>
							<span id="currentPage">1</span>
							<button id="nextPage">Next</button>
						</div>
					</div>
					<div class="friend-requests">
						<h2>Friend Requests</h2>
						<button id="refresh" class="refresh">Refresh</button>
						<br>
						<ul id="friendRequests"></ul>
						<div class="pagination">
							<button id="prevNewPage">Previous</button>
							<span id="currentNewPage">1</span>
							<button id="nextNewPage">Next</button>
						</div>
					</div>
					<div class="add-friend">
						<h2>Add Friend</h2>
						<div class="search-bar">
							<input type="text" id="addFriendSearch" placeholder="Add New Friends...">
							<button id="addNewFriend">Add</button>
						</div>
						<ul id="newFriendsList"></ul>
					</div>
				</div>
				<div class="logout">
					<button id="logoutButton">Logout</button>
				</div>
			</div>
			<!-- <script src="../js/menu.js"></script> -->

			<div id="editProfileModal" class="editProfile modal">
				<div class="modal-content">
					<h2>Edit Profile</h2>
					<div class="profile-image-upload">
						<img id="profileImagePreview" src="" alt="Profile Picture Preview">
						<input type="file" id="profileImageUpload" accept="image/*">
						<button id="uploadImageBtn">Upload Image</button>
					</div>
					<div class="username-edit">
						<input type="text" id="usernameInput" placeholder="New Display Name">
						<button id="saveUsernameBtn">Save Display Name</button>
					</div>
					<button id="closeModalBtn">Close</button>
				</div>
			</div>

			<div id="friendProfileModal" class="friendProfile modal">
				<div class="modal-content">
					<span id="closeInfo" class="close">&times;</span>
					<div class="friend-profile-info">
						<img id="friendProfilePicture" src="" alt="Friend's Profile Picture" class="profile-picture">
						<h2>Username</h2>
						<h2 id="friendUsername"></h2>
						<h2>Display Name</h2>
						<p id="friendDisplayName"></p>
						<h2>Matches Played</h2>
						<h2 id="friendMatchPlayed"></h2>
						<h2>Matches Lost</h2>
						<p id="friendMatchLost"></p>
						<h2>Matches Won</h2>
						<p id="friendMatchWon"></p>
						<div class="friend-win-rate-container">
							<div class="friend-win-rate-bar">
								<div id="friendWinRateProgress"></div>
							</div>
							<p class="friend-win-rate">Win Rate: <span id="friendWinRate">0.0</span>%</p>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Verification Page -->
		<div id="verificationScreen"
			class="container d-none flex-column justify-content-center align-items-center vh-100 Scifi">
			<div class="margin-top login">
				<h1>A code is sent to <span id="userEmail"></span> to verify your identity.</h1>
				<form id="verificationForm" class="text-center mt-4">
					<div class="form-group">
						<label for="verificationCode">Enter Verification Code:</label>
						<input type="text" class="form-control" id="verificationCode" placeholder="Enter your code"
							required>
					</div>
					<button type="submit" class="redbtn btn-primary mt-3">Submit</button>
				</form>
			</div>
		</div>

		<!-- Vanilla Pong AI Selection -->
		<div id="ailvlSelectScreen"
			class="container d-none flex-column justify-content-center align-items-center vh-100 Scifi">
			<div class="centered-container">
				<br><br>
				<h1 class="CN-font">Welcome to Vanilla Pong.</h1>
				<h2 class="CN-font">Choose your level:</h2>
				<br>
				<div class="button-container">
					<button class="btn btn-custom mx-3" id="easyAIButton">EASY</button>
					<button class="btn btn-custom mx-3" id="hardAIButton">HARD</button>
					<button class="btn btn-custom mx-3" id="backToMenuButton_1">BACK</button>
				</div>
			</div>
		</div>

		<!-- Friends Pong Mode PvP Selection -->
		<div id="friendsModeSelectScreen"
			class="container d-none flex-column justify-content-center align-items-center vh-100 Scifi">
			<div class="centered-container">
				<br><br>
				<h1 class="CN-font">Welcome to Friends Pong.</h1>
				<h2 class="CN-font">Choose your mode:</h2>
				<br>
				<div class="button-container">
					<button class="btn btn-custom mx-3" id="soloButton">SOLO</button>
					<button class="btn btn-custom mx-3" id="tournamentButton">TOURNAMENT</button>
					<button class="btn btn-custom mx-3" id="backToMenuButton_2">BACK</button>
				</div>
			</div>
		</div>

		<!-- Game Container -->
		<div id="gameContainer" class="container d-none">
			<!-- <div class="feature-buttons">
				<button id="Collision_Particles">Enable Collision Particles</button>
				<button id="Snowfall">Enable Snowfall</button>
			</div> -->
			<div class="scoreboard notranslate" id="score"></div>
			<div class="info">
				Rotation(x,y,z): <div id="position"></div>
				Camera(z): <div id="scale"></div>
			</div>
			<div class="position">
				Left Paddle(y): <div id="leftPaddlePosition"></div>
				Right Paddle(y): <div id="rightPaddlePosition"></div>
				Ball Speed(x,y): <div id="ballSpeed"></div>
			</div>
			<div class="gamemode notranslate" id="gameMode"></div>
			<!-- <div class="leftplayer" id="leftPlayerName"></div>
			<div class="rightplayer" id="rightPlayerName"></div> -->
			<div class="left-info CN-font">
				<h3>Controls</h3>
				<p>Paddle Movement</p>
				<p>Up: W</p>
				<p>Down: S</p>
				<p>Rotation (z-axis)</p>
				<p>Clockwise: O</p>
				<p>Anti-clockwise: U</p>
				<p>Tilt (x-axis)</p>
				<p>Up: I</p>
				<p>Down: K</p>
				<p>Tilt (y-axis)</p>
				<p>Left: J</p>
				<p>Right: L</p>
				<p>Zoom</p>
				<p>In: =</p>
				<p>Out: -</p>
				<p>Reset all: R</p>
			</div>
			<div class="right-info CN-font">
				<h3>Game Info</h3>
				<p>Player Left: <span class="notranslate" id="leftPlayerName"></span></p>
				<p>Player Right: <span class="notranslate" id="rightPlayerName"></span></p>
			</div>
			<div class="feature-buttons">
				<button id="Collision_Particles">Enable Collision Particles</button>
				<button id="Snowfall">Enable Snowfall</button>
			</div>
		</div>

		<!-- Game Over Screen -->
		<div id="gameOverScreen"
			class="container d-none flex-column justify-content-center align-items-center vh-100 Scifi">
			<br><br>
		<div class="centered-container">
			<div class="margin-top login">
				<h1>Match Results</h1>
				<h2  class="CN-font" id="gameOverText"></h2>
				<br><br>
				<button id="backToMenuButton_3" class="btn btn-custom mx-3 Scifi">MENU</button>
			</div>
		</div>
		</div>

		<!-- Loading Screen -->
		<div id="loadingScreen" class="container d-none flex-column justify-content-center align-items-center vh-100 Scifi">
			<div class="centered-container">
			<div class="margin-top login">
				<h1 class="CN-font">PREPARING MATCH ...</h1>
			</div>
		</div>
		</div>

		<!-- Countdown -->
		<div id="countdownDisplay" class="container d-none flex-column justify-content-center align-items-center vh-100 Scifi">
			<div class="countdown">
				<div id="countdown">3</div>
			</div>
		</div>

		<!-- Google Translate Script -->
		<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
		<!-- Bootstrap JS and dependencies -->
		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
		<!-- Custom JS -->
		<script src="../js/multi-language.js"></script>
		<script type="module" src="../js/index.js"></script>
		<script>
			window.addEventListener('load', () => {
				const translateSelect = document.querySelector('select.goog-te-combo');
				if (translateSelect) {
					translateSelect.value = 'en'; // Set the language to English
					translateSelect.dispatchEvent(new Event('change')); // Trigger the change event
				}
			});
		</script>
</body>

</html>